<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Overlays :: Gloomhaven Enhanced</title>
    <meta name="generator" content="Antora 3.0.3">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Gloomhaven Enhanced</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://discord.gg/SA9hHVNkMf">Discord</a>
            <a class="navbar-item" href="https://discord.gg/2kM4T6p">Custom Content Discord</a>
            <a class="navbar-item" href="https://www.reddit.com/r/GloomhavenTTSEnhanced/">Reddit</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://steamcommunity.com/sharedfiles/filedetails/?id=2402018642">Steam</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="custom" data-version="1.3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Custom Content</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scripts.html">How to use the scripts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html">How to use this documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="contentbox.html">Content Box</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="class.html">Classes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="condition.html">Conditions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="enemy.html">Enemies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="scenario.html">Scenarios</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="overlay.html">Overlays</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Common</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common/formula.html">Formulas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common/action.html">Actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common/spawnable.html">Spawnable Element</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration/1.2.html">1.2</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Custom Content</span>
    <span class="version">1.3</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Custom Content</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">1.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../dev/1.3/index.html">Development</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../dev/1.3/index.html">1.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mod/1.3/index.html">Gloomhaven Enhanced</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mod/1.3/index.html">1.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Custom Content</a></li>
    <li><a href="overlay.html">Overlays</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/gloomhaven-tts-enhanced/public-scripts/edit/main/docs/content/customContent/modules/ROOT/pages/overlay.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Overlays</h1>
<div class="sect1">
<h2 id="_checklist"><a class="anchor" href="#_checklist"></a>Checklist</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Create an overlay token</p>
</li>
<li>
<p>Set the name of the object</p>
</li>
<li>
<p>Add the tag according to the <a href="#Overlay_Type">Overlay Type</a></p>
</li>
<li>
<p>Add the <a href="#Script_Overlay">script</a> and <a href="#UI_Overlay">UI</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_components"><a class="anchor" href="#_components"></a>Components</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overlay_token"><a class="anchor" href="#_overlay_token"></a>Overlay Token</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the overlay (has to be unique across the overlay type).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specific tag for the overlay type (see <a href="#Overlay_Type">Overlay Type</a>).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>If you want to also add a 3D representation for the overlay you have to add a new state for it (see <a href="https://kb.tabletopsimulator.com/host-guides/creating-states/">the TTS knowledge base</a> for more info).
By convention the first state is for the 2D token and the second state for the 3D token.
You can also have more than 2 states.
In this case, when the overlay is placed a random state is determined for each overlay during load.
E.g. in the mod the tree overlay has 3 different 3D models and one will be chosen randomly for each tree overlay token placed in a scenario.</p>
</div>
<div class="sect3">
<h4 id="Script_Overlay"><a class="anchor" href="#Script_Overlay"></a>Script</h4>
<div class="paragraph">
<p>There are two kind of overlay scripts: <code>Overlay</code> and <code>BasicOverlay</code>.
The difference between them is that the first one supports adding HP bars to the overlay whereas the second one only supports adding buttons for <a href="#Actions">[Actions]</a> (like the "Open" button for doors).
Traps have their own script that has to added.
The script has to be added to all object states of the overlay token (possibly with different parameters).</p>
</div>
<div class="paragraph">
<p>Within the script two parameters have to be adjusted.
The parameter for <code>withFrameOffset</code> is the height where an HP bar will appear.
The parameter for <code>withButtonPosition</code> is the height where a button for <a href="#Actions">[Actions]</a> will appear.
The correct position probably has to be found through testing.
For a non 3D-token a frame offset of <code>90</code> and a button position of <code>0.02</code> should work.</p>
</div>
<div class="listingblock">
<div class="title">Overlays/Overlay.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">require("Overlays.Overlay")
    .withFrameOffset(90)
    .withButtonPosition(0.02)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Overlays/BasicOverlay.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">require("Overlays.BasicOverlay")
    .withButtonPosition(0.02)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Traps have their own script in order to show the damage and status they apply when triggered.</p>
</div>
<div class="listingblock">
<div class="title">Overlays.Trap.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">require("Overlays.Trap")
    .withFrameOffset(90)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="UI_Overlay"><a class="anchor" href="#UI_Overlay"></a>UI</h4>
<div class="paragraph">
<p>Simply add the following UI script.</p>
</div>
<div class="listingblock">
<div class="title">Overlays/Overlay.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Include src="Overlays/Overlay.xml" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, traps have their own UI script.</p>
</div>
<div class="listingblock">
<div class="title">Overlays/Trap.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Include src="Overlays/Trap.xml" /&gt;</code></pre>
</div>
</div>
<div id="Overlay_Type" class="dlist">
<dl>
<dt class="hdlist1">Overlay Type</dt>
<dd>
<p>Tags required for overlays, so that the mod can move the tokens to the correct place.</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Overlay Type</th>
<th class="tableblock halign-left valign-top">Tag</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corridor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Corridor</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Difficult Terrain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Difficult Terrain</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Door</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Door</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hazardous Terrain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Hazardous Terrain</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map Tile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Map</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Obstacle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Obstacle</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Trap</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Treasure Chest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Treasure Chest</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_treasure"><a class="anchor" href="#_treasure"></a>Treasure</h3>
<div class="paragraph">
<p>Treasure are the objects that are drawn when opening a treasure chest.
In the mod these are typically cards that show what reward the chest contains, but can be anything.
In order to support custom treasures, you simply need to add a unique name to the object and add the tag <code>Treasure</code> on the object.
To draw the treasure, within a scenario, you have to add it to the <a href="#Scenario">[Scenario]</a> definition using a <a href="#Action_Treasure">Treasure Action</a>.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
