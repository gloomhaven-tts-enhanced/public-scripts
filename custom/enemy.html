<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Enemies :: Gloomhaven Enhanced</title>
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../_/css/site.css">
    <script>var uiRootPath = '../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="..">Gloomhaven Enhanced</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://discord.gg/SA9hHVNkMf">Discord</a>
            <a class="navbar-item" href="https://discord.gg/2kM4T6p">Custom Content Discord</a>
            <a class="navbar-item" href="https://www.reddit.com/r/GloomhavenTTSEnhanced/">Reddit</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="https://steamcommunity.com/sharedfiles/filedetails/?id=2402018642">Steam</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="custom" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Custom Content</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="scripts.html">How to use the scripts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="documentation.html">How to use this documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="contentbox.html">Content Box</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="class.html">Classes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="condition.html">Conditions</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="enemy.html">Enemies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="scenario.html">Scenarios</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="overlay.html">Overlays</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="backgrounds.html">Backgrounds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Common</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common/formula.html">Formulas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common/action.html">Actions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="common/spawnable.html">Spawnable Element</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration/1.3.html">1.3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="tools/sectionTool.html">Section Tool</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Custom Content</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">Custom Content</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../dev/index.html">Development</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../dev/index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../mod/1.3/index.html">Gloomhaven Enhanced</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../mod/1.3/index.html">1.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Custom Content</a></li>
    <li><a href="enemy.html">Enemies</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/gloomhaven-tts-enhanced/public-scripts/edit/main/docs/content/customContent/modules/ROOT/pages/enemy.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Enemies</h1>
<div class="sect1">
<h2 id="_components"><a class="anchor" href="#_components"></a>Components</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_enemy_envelope"><a class="anchor" href="#_enemy_envelope"></a>Enemy Envelope</h3>
<div class="paragraph">
<p>The enemy envelope is the bag that contains all components for a new enemy of that type.
It will not be shown to the players, so a regular bag is sufficient, no extra model needed.</p>
</div>
<div class="paragraph">
<p>The bag must contain the <a href="#_enemy_bag">Enemy Bag</a>, the <a href="#_stats_sheet">Stats-Sheet</a> and the <a href="#_ability_deck">Ability Deck</a> in any order.</p>
</div>
<div class="paragraph">
<p>The bag itself will never be placed on the table by the mod, so it shouldn&#8217;t contain and scripts as those would never be executed.
It&#8217;s sole function is to group all objects belonging to a single enemy type.</p>
</div>
<div class="sect3">
<h4 id="_properties"><a class="anchor" href="#_properties"></a>Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full name of the enemy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Enemy Envelope</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_enemy_bag"><a class="anchor" href="#_enemy_bag"></a>Enemy Bag</h3>
<div class="paragraph">
<p>This is an infinite bag containing the <a href="#_figure">Figure</a> for the enemy.
It will be placed on the monster mat and new enemies will be spawned from the bag.</p>
</div>
<div class="sect3">
<h4 id="_properties_2"><a class="anchor" href="#_properties_2"></a>Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full name of the enemy followed by " Standee", e.g. "Bandit Archer Standee"</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_lua_script"><a class="anchor" href="#_lua_script"></a>Lua Script</h4>
<div class="paragraph">
<p>The Enemy Bag is currently the best place to register the enemy.
This is typically done in two steps.</p>
</div>
<div class="paragraph">
<p>First the enemy&#8217;s ability deck has to be registered.
This is done by calling <code>EnemyApi.registerEnemyAbilityDeck</code>.
It takes the name of the ability deck and the list of abilities it includes.
The abilities can have two attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <code>image</code> with the link to the image for this ability card.
This value isn&#8217;t used for 1.3 yet, so it can also be ignored.
It will be used for future versions, e.g. to the show the active ability card of an enemy in the initiative tracker.</p>
</li>
<li>
<p>A <code>spawn</code> element, describing which object the ability can spawn (like traps or summoning other enemies).
Documentation about the proper attributes for this element can be found <a href="common/spawnable.html" class="xref page">here</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This part should be skipped, if the enemy uses an ability deck that is already registered in the game.
This is the case for all decks from the Gloomhaven base game.</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Registration for the "Archer" enemy ability deck</div>
<div class="content">
<div class="listingblock">
<div class="title">api/GloomApi.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local EnemyApi = require("api.EnemyApi")
local R = require("api.Resource")

EnemyApi.registerEnemyAbilityDeck("Archer", {
  abilities = {
    [1] = {
      image = "https://raw.githubusercontent.com/any2cards/gloomhaven/master/images/monster-ability-cards/archer/ma-ar-1.png",
    },
    -- abilities 2 till 6 would be here too
    [7] = {
      image = "https://raw.githubusercontent.com/any2cards/gloomhaven/master/images/monster-ability-cards/archer/ma-ar-7.png",
      spawn = {
        {
          element = {
            type = R.ElementType.Trap,
            name = "Spike Trap",
            damage = 3,
          },
        }
      },
    },
    [8] = {
      image = "https://raw.githubusercontent.com/any2cards/gloomhaven/master/images/monster-ability-cards/archer/ma-ar-8.png",
    },
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once the ability deck is registered, the actual enemy type has to be registered, to connect the enemy to the ability deck.
This is done by calling <code>EnemyApi.registerEnemy</code>.
This function takes the name of the enemy type and two named parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>icon</code> is the link to an image for an icon of this enemy type.
This is currently used in the Context Menu, when the enemy can be summoned by other enemies.</p>
</li>
<li>
<p><code>abilityDeck</code> is the name of a previously registered ability deck.
This tells the mod that this enemy uses the ability deck with this name.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 2. Registration of the "Bandit Archer" enemy.</div>
<div class="content">
<div class="listingblock">
<div class="title">api/GloomApi.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local EnemyApi = require("api.EnemyApi")

EnemyApi.registerEnemy("Bandit Archer", {
    icon = "http://cloud-3.steamusercontent.com/ugc/1688272925075790807/F181B084F5CA91BC0E0F75C682C6993C4BCBDA43/",
    abilityDeck = "Archer",
})</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If the enemy is a boss enemy, another API has to be used instead: <code>EnemyApi.registerBossEnemy</code>.
Since all bosses use the same ability deck, this is where their abilities are defined (e.g. which elements they can spawn).
The <code>spawn</code> element works the same as for <code>registerEnemyAbilityDeck</code> and details can be found <a href="common/spawnable.html" class="xref page">here</a>.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">api/GloomApi.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local EnemyApi = require("api.EnemyApi")
local R = require("api.Resource")

EnemyApi.registerBossEnemy("Bandit Commander", {
  icon = "http://cloud-3.steamusercontent.com/ugc/1688272925075790870/264D1A7A6C93A37894B204DD6CDB555F11B8B5BD/",
  spawn = {
    {
      element = {
        type = R.ElementType.Enemy,
        name = "Living Bones",
      },
    },
  },
})</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_figure"><a class="anchor" href="#_figure"></a>Figure</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full name of the enemy type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Must</strong> be empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Enemy</code> (will also be set by the script).</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="_lua_script_2"><a class="anchor" href="#_lua_script_2"></a>Lua Script</h4>
<div class="paragraph">
<p>Put the following Lua script on the Figure.
The value for <code>FrameOffset</code> defines where the HP will be placed at.
Adjust the value to fit the model.
You can use <a href="https://steamcommunity.com/sharedfiles/filedetails/?id=2817408711">this tool</a> to easily try out different values.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Figures/Monster.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">FrameOffset = 260

require("Figures.Monster")</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_xml_ui"><a class="anchor" href="#_xml_ui"></a>Xml Ui</h4>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Figures/Monster.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;Include src="Figures/Monster.xml"/&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stats_sheet"><a class="anchor" href="#_stats_sheet"></a>Stats-Sheet</h3>
<div class="sect3">
<h4 id="_properties_3"><a class="anchor" href="#_properties_3"></a>Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full name of the enemy followed by " Stat Sheet", e.g. "Bandit Archer Stat Sheet".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tags</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MonsterStatSheet</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_lua_script_3"><a class="anchor" href="#_lua_script_3"></a>Lua Script</h4>
<div class="paragraph">
<p>Within the script of the Stats-Sheet the stats for the different levels are defined as well as how many figures can be present for this enemy type.</p>
</div>
<div class="paragraph">
<p>To define the maximum number of enemies, declare a variable named <code>count</code>.
Put the following script on the Stats-Sheet and adjust the values accordingly.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Defining the maximum number of figures.</div>
<div class="content">
<div class="listingblock">
<div class="title">StatSheet.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">count = 4

require("StatSheet")</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The stats per level are declared using the variable named <code>stats</code>.
This variable is a table of stat entries, one per level.
You can use a numeric index, to more easily set the values per level.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. General structure of the <code>stats</code> variable</div>
<div class="content">
<div class="listingblock">
<div class="title">StatSheet.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">stats = {
  [0] = {
    -- Level 0 stats go here
  [1] = {
    -- Level 1 stats go here
  }
  -- etc.
}

require("StatSheet")</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The entry for each level has an attribute named <code>orientation</code> and the attributes <code>normal</code> and <code>elite</code>.
In case of a boss enemy the level has an attribute <code>boss</code> instead of <code>normal</code> and <code>elite</code>.</p>
</div>
<div class="paragraph">
<p>The <code>orientation</code> attribute defines the rotation of the Stat-Sheets object that shows that stats for this level.
This is used by the mod to figure out which level is currently set on the Stats-Sheet by checking the current orientation of the object with the entries defined here.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">StatSheet.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">stats = {
  [0] = {
    orientation = {0, 180, 0},
    normal = {
      -- stats for normal version go here
    },
    elite = {
      -- stats for elite version go here
    },
    boss = {
      -- this is used by bosses instead of the above two
    }
  },
}

require("StatSheet")</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Within <code>normal</code>, <code>elite</code> or <code>boss</code> the actual stats have to be defined.
Checkout <a href="#_stats">Stats</a> for the available attributes.</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. More complete example of the Stats-Sheet script.</div>
<div class="content">
<div class="listingblock">
<div class="title">StatSheet.ttslua</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">-- maximum number of standees for this enemy type
count = 4;

-- stats per level
stats = {
  [0] = {
    -- this is the orientation the stat that shows the level
    orientation = {0, 180, 0},
    -- stats for the normal version
    normal = {
      health = 8,
      move = 3,
      attack = 2,
      range = 0,
      attributes = {}
    },
    -- stats for the elite version
    elite = {
      health = 13,
      move = 3,
      attack = 3,
      range = 0,
      attributes = {}
    }
  },
  -- same for level 1
  [1] = {
    orientation = {0, 90, 0},
    normal = {
      health = 9,
      move = 3,
      attack = 2,
      range = 0,
      attributes = {
        "Poison"
      }
    },
    elite = {
      health = 15,
      move = 3,
      attack = 3,
      range = 0,
      attributes = {
        "Wound"
      }
    }
  },
  -- level 2 and 3 omitted
  [4] = {
    -- level 4 is the same, but now the back of the stat sheet is used,
    -- so the rotation on the z-axis has to be changed to account for that
    orientation = {0, 180, 180},
    normal = {
      health = 16,
      move = 3,
      attack = 4,
      range = 0,
      attributes = {
        "Poison"
      }
    },
    elite = {
      health = 24,
      move = 4,
      attack = 4,
      range = 0,
      attributes = {
        "Poison",
        "Wound"
      }
    }
  },
  -- and so on until level 7
}

require("StatSheet");</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ability_deck"><a class="anchor" href="#_ability_deck"></a>Ability Deck</h3>
<div class="paragraph">
<p>The Ability Deck contains the different <a href="#_ability_card">Ability Cards</a>.</p>
</div>
<div class="sect3">
<h4 id="_properties_4"><a class="anchor" href="#_properties_4"></a>Properties</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Ability Deck (e.g. "Archer").</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ability_card"><a class="anchor" href="#_ability_card"></a>Ability Card</h3>
<div class="paragraph">
<p>Each Ability Card within the <a href="#_ability_deck">Ability Deck</a> needs to have a special naming structure and the <code>Monster Ability Card</code> tag.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Ability Deck (e.g. "Archer").</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Definition of the initiative (see below).</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The description field is used to encode the initiative values(s) and the action(s) the enemy takes.</p>
</div>
<div class="paragraph">
<p>Each entry has to start with an initiative value followed by a colon and a space.
The initiative value needs to have a leading zero if it&#8217;s below 10.</p>
</div>
<div class="paragraph">
<p>After the colon, the textual description can be added.
This is used in the initiative tracker to show what the enemy is doing.
Multiple actions can be defined by using a semicolon.
Those will show up as separate lines in the initiative tracker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>31: Move +0; Attack +0</pre>
</div>
</div>
<div class="paragraph">
<p>For abilities that shuffle the ability cards, add <code>shuffle</code> after the initiative.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>15 shuffle: Move +1; Attack +1</pre>
</div>
</div>
<div class="paragraph">
<p>If the ability grants multiple actions at different initiatives, you can use new lines.
Each line will add an entry to the initiative tracker.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>03: Attack +0
11: Move +0
20: Attack +0</pre>
</div>
</div>
<div class="paragraph">
<p>To use icons in the initiative tracker, you must change your player color to black and update the GM Note instead of the Description field.
You can use the following text for icons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{e.Attack}</code></p>
</li>
<li>
<p><code>{e.Move}</code></p>
</li>
<li>
<p><code>{e.Heal}</code></p>
</li>
<li>
<p><code>{e.Loot}</code></p>
</li>
<li>
<p><code>{e.Shield}</code></p>
</li>
<li>
<p><code>{e.Retaliate}</code></p>
</li>
<li>
<p><code>{e.Range}</code></p>
</li>
<li>
<p><code>{e.Target}</code></p>
</li>
<li>
<p><code>{e.Damage}</code></p>
</li>
<li>
<p><code>{e.Jump}</code></p>
</li>
<li>
<p><code>{e.Fly}</code></p>
</li>
<li>
<p><code>{e.Teleport}</code></p>
</li>
<li>
<p><code>{e.Generate Fire}</code></p>
</li>
<li>
<p><code>{e.Generate Ice}</code></p>
</li>
<li>
<p><code>{e.Generate Air}</code></p>
</li>
<li>
<p><code>{e.Generate Earth}</code></p>
</li>
<li>
<p><code>{e.Generate Light}</code></p>
</li>
<li>
<p><code>{e.Generate Dark}</code></p>
</li>
<li>
<p><code>{e.Generate Any}</code></p>
</li>
<li>
<p><code>{e.Consume Fire}</code></p>
</li>
<li>
<p><code>{e.Consume Ice}</code></p>
</li>
<li>
<p><code>{e.Consume Air}</code></p>
</li>
<li>
<p><code>{e.Consume Earth}</code></p>
</li>
<li>
<p><code>{e.Consume Light}</code></p>
</li>
<li>
<p><code>{e.Consume Dark}</code></p>
</li>
<li>
<p><code>{e.Consume Any}</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also include an icon for any custom registered effect or condition using <code>{e.&lt;Effect&gt;}</code> or <code>{c.&lt;Condition&gt;}</code> respectively.</p>
</div>
<div class="paragraph">
<p>You can add other custom conditions/effects, as long as they are already part of the <a href="https://drive.google.com/file/d/1ic98JHjxX4JKE5pudp4ORIk72dvBJuvy/view?usp=share_link">Markazi Gloom Color font</a> by <a href="https://github.com/Dimon-II">Dimon-II</a>. To add them, the registerCondition and registerEffect functions allow a new entry called renderedMarkup which takes any string. Whatever you put there will be shown in the preview whenever the markup for this Condition/Effect is used. There are already helper via the new UiApi where you only need to provide the glyph and color used for the condition. E.g. for a condition, all you need to do is to find the correct glyph in the font and insert it into the first parameter of UiApi.conditionText <code>\u{&lt;Glyph&gt;}</code>. The color for the condition as hex value is the second parameter.</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. How to add Safeguard as a custom condition:</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local UiApi = require("api.UiApi")

ConditionApi.registerCondition("Safeguard", {
  image = "...",
  immunity = { ... },
  renderedMarkup = UiApi.conditionText("\u{E09D}", "#5B9977"),
})</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can include an AoE "Area" which will display an AoE pattern in the initiative tracker. This can be designated using <code>{area.&lt;Rows&gt;}</code> with specific syntax to create the intended pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>s</code> will create a grey "self" hex</p>
</li>
<li>
<p><code>t</code> will create a red "enemy" hex</p>
</li>
<li>
<p><code>a</code> will create a blue "ally" hex</p>
</li>
<li>
<p><code>e</code> will create a blank space with no hex</p>
</li>
<li>
<p><code>_</code> will begin a new row, every even row will be automatically intented by half a hex</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="title">Example 7. Wind Demon&#8217;s ability with two areas:</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">-- first row: empty hex and two target hexes
-- second row: the self hex and a target hex
{area.ett_st}
-- second area
{area.ett_stt_ett}</code></pre>
</div>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/any2cards/gloomhaven/master/images/monster-ability-cards/gloomhaven/wind-demon/gh-ma-wd-5.png" alt="gh ma wd 5">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stats"><a class="anchor" href="#_stats"></a>Stats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Stats for enemies and summons have the following structure.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local stats = {
  -- The maximum health values
  health = 8,
  -- The base move value
  move = 3,
  -- The base attack value
  attack = 2,
  -- The base range value
  range = 0,
  -- A list of extra effect like retaliate shield
  attributes = { },
  -- A list of immunities
  immunities = { },
  -- A text that will be shown below the healthbar
  -- This can be used for describing what a variable means, e.g. on a boss
  -- like, "V is the number of ..."
  text = "",
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_health"><a class="anchor" href="#_health"></a>Health</h3>
<div class="paragraph">
<p>This attribute takes a single value.
For Boss enemies this can also be a string in the form of "8xC", which will calculate the value based on player count.
A <a href="common/formula.html" class="xref page">Formula</a> is currently not supported.</p>
</div>
</div>
<div class="sect2">
<h3 id="_move"><a class="anchor" href="#_move"></a>Move</h3>
<div class="paragraph">
<p>The <code>move</code> attribute can either be a simple value (a number or string like above), or a table with the attributes <code>value</code> and <code>type.</code>
The attribute <code>value</code> determines how for the figure can move and the <code>type</code> determines the movement type (e.g. for flying enemies).
The value for this field can the name of any registered <a href="condition.html#_effects" class="xref page">Effect</a>, but generally should be "Fly", "Jump", or "Teleport".</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">-- A flying enemy
move = {
  value = 3,
  type = "Fly"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_attack"><a class="anchor" href="#_attack"></a>Attack</h3>
<div class="paragraph">
<p>The <code>attack</code> attribute functions similar.
It can take a simple value or a table with the attributes <code>value</code> and <code>area.</code>
The attribute <code>value</code> determines the attack value of the figure the <code>area</code> attribute is the name of an <a href="condition.html#_effects" class="xref page">Effect</a>.
The image for this Effect will be shown next to the attack value.
Its purpose is to show the attack area for this figure, but it could be used for any other effect as well.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">-- An enemy with a special attack area
attack = {
  value = 3,
  area = "Area X"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_immunities"><a class="anchor" href="#_immunities"></a>Immunities</h3>
<div class="paragraph">
<p>The <code>immunities</code> field is a list of <a href="condition.html#_effects" class="xref page">Effects</a> this figure is immune to.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">immunities = { "Poison", "Pull", "Curse", "Stun" }</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_attributes"><a class="anchor" href="#_attributes"></a>Attributes</h3>
<div class="paragraph">
<p>The <code>attributes</code> field describes extra attributes for the enemy, like if it has a shield value, or retaliated damage or always applies a certain condition.
It&#8217;s a list that can contain three kinds of different values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A simple string.
This is the name of any registered <a href="condition.html#_effects" class="xref page">Effect</a>, e.g. "Generate Air", "Muddle" or "Curse"</p>
</li>
<li>
<p>A name, value pair.
The name is the name of any registered effect and the value is the value for this Effect, e.g. "Shield = 2" or "Retaliate = 2".
This will show the image for the Effect followed by a text with this value.</p>
</li>
<li>
<p>A name with a table that has the attributes <code>value</code> and <code>range</code>.
This is used for retaliated damage that has a range.
It will show the image for the Retaliate Effect and it&#8217;s value, followed by the image for Range and it&#8217;s value.
While this is currently only used for Retaliate, this format can be used for any other Effect as well.</p>
</li>
</ul>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>attributes = {
  -- the name of an Effect
  "Generate Air",
  -- the name of an Effect and it's value
  Shield = 2,
  -- short for for Retaliate, if the range is 1
  Retaliate = 2,
  -- special form for Retaliate, with a range greater than 1
  Retaliate = {
    value = 2,
    range = 2
  },
}</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_text"><a class="anchor" href="#_text"></a>Text</h3>
<div class="paragraph">
<p>This text will be shown below the figure and can be used to describe special variables or specific effects for this figure.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
  </body>
</html>
