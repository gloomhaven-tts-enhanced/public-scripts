<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spawnable Element :: Gloomhaven Enhanced</title>
    <meta name="generator" content="Antora 3.1.6">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/gh-site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Gloomhaven Enhanced</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="custom" data-version="2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Custom Content</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../scripts.html">How to use the scripts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../documentation.html">How to use this documentation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contentbox.html">Content Box</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../class.html">Classes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../condition.html">Conditions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../enemy.html">Enemies</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../scenario.html">Scenarios</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../overlay.html">Overlays</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Other</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backgrounds.html">Backgrounds</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Common</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="formula.html">Formulas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="action.html">Actions</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="spawnable.html">Spawnable Element</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Migration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../migration/1.3.html">1.3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools/enhancementTool.html">Enhancement Tool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tools/sectionTool.html">Section Tool</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Custom Content</span>
    <span class="version">2-beta</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../../latest/index.html">Custom Content</a></div>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">2-beta</a>
        </li>
        <li class="version is-latest">
          <a href="../../latest/index.html">1.3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <div class="title"><a href="../../../dev/index.html">Development</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../../mod/latest/index.html">Gloomhaven Enhanced</a></div>
      <ul class="versions">
        <li class="version">
          <a href="../../../mod/next/index.html">2-beta</a>
        </li>
        <li class="version is-latest">
          <a href="../../../mod/latest/index.html">1.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Custom Content</a></li>
    <li>Common</li>
    <li><a href="spawnable.html">Spawnable Element</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2-beta</button>
  <div class="version-menu">
    <a class="version is-current" href="spawnable.html">2-beta</a>
    <a class="version" href="../../latest/common/spawnable.html">1.3</a>
  </div>
</div>
<div class="edit-this-page"><a href="https://github.com/gloomhaven-tts-enhanced/public-scripts/edit/main/docs/content/customContent/modules/ROOT/pages/common/spawnable.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Spawnable Element</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Spawnable elements are a way to define objects that can be spawned by certain actions.
They define which objects should be created and what properties they should have.
The mod uses the information to pull the correct object and apply the properties to it.
Currently they can be used to define the content for the <a href="#mod:engine:feature/contextMenu.adoc" class="xref unresolved">Context Menu</a> as well as for the <a href="action.html#_spawn" class="xref page">Spawn Action</a> within a scenario definition.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_a_spawnable_element"><a class="anchor" href="#_defining_a_spawnable_element"></a>Defining a Spawnable Element</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each Spawnable Element definition has two required properties: The type of the element (e.g. an obstacle, trap, enemy, etc.) and it&#8217;s name.
The type tells the mod where to look for the object and the name determines which object from that place it spawns.
Both those properties are defined within the <code>element</code> property.
To get access to the different types, use the <code>ElementType</code> table in the <code>ResourceApi</code> (as seen in the example).</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Definition for a Boulder obstacle</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local R = require("api.Resource")

local spawnableElement = {
  element = {
    type = R.ElementType.Obstacle,
    name = "Boulder",
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>There are also additional properties that can be set for all elements that support them (most overlays do).
E.g. conditions, current/maximum HP or scenario aid tokens.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Additional properties for an element</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local R = require("api.Resource")

local spawnableElement = {
  element = {
    type = R.ElementType.Obstacle,
    name = "Boulder",
    -- Add the scenario aid tokens A and B to the object
    tokens = {"a", "b"},
    -- Add the Wound condition to the object
    conditions = {"Wound"},
    -- sets the current HP. If hpMax is not used, this is also the maximum HP
    hp = 3,
    -- sets the maximum HP
    hpMax = { "+", "C", 1},
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The properties <code>hp</code> and <code>hpMax</code> can be a <a href="formula.html" class="xref page">Formula</a>.</p>
</div>
<div class="paragraph">
<p>Some elements, like traps and enemies, also have additional properties.</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Definition for a trap with damage and conditions</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local R = require("api.Resource")

local spawnableElement = {
  element = {
    type = R.ElementType.Trap,
    name = "Bear Trap",
    conditions = { "Stun" },
    -- Defines the amount of damage this trap does
    damage = 3,
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 4. Definition for a summonable enemy</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local R = require("api.Resource")

local spawnableElement = {
  element = {
    type = R.ElementType.Enemy,
    name = "Living Bones",
    -- Spawns at elite difficulty. If not used, "normal" is the default
    difficulty = "elite",
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_spawnable_elements_for_the_context_menu"><a class="anchor" href="#_using_spawnable_elements_for_the_context_menu"></a>Using Spawnable Elements for the Context Menu</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To make Spawnable Elements appear in the <a href="#mod:engine:feature/contextMenu.adoc" class="xref unresolved">Context Menu</a>, they have to be added to the ability information of the class or enemy which can create them, by using the <code>spawn</code> property.</p>
</div>
<div class="paragraph">
<p>For classes this is part of the class information used for <code>registerClass</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 5. Definition within a class ability</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local ClassApi = require("api.ClassApi")
local R = require("api.Resource")

ClassApi.registerClass("Doomstalker", {
  abilities = {
    ["Detonation"] = {
      level = 1,
      enhancements = {},
      spawn = {
        {
          element = {
            type = R.ElementType.Trap,
            name = "Spike Trap",
            damage = 3,
          }
        }
      }
    },
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Currently, the element will show up in the Context Menu, if the ability is somewhere present on the table (so not necessarily if it was placed for the current round).
The tooltip in the Context Menu will show which ability defined the element, so it&#8217;s easier for users to spawn the correct one.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to define Spawnable Elements on the top level of a class definition.
Then the element will always show up in the Context Menu regardless of which ability is present.
This is useful if the class has lots abilities that spawn the same element.
Using the definition in the abilities would clutter the Context Menu with multiple entries of the same element, so this is a way to prevent that.</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. Definition within a class</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local ClassApi = require("api.ClassApi")
local R = require("api.Resource")

ClassApi.registerClass("Doomstalker", {
  spawn = {
    {
      element = {
        type = R.ElementType.Trap,
        name = "Spike Trap",
        damage = 3,
      }
    }
  }
})</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>For enemies this is done in the ability deck definition used for <code>registerEnemyAbilityDeck</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. Definition within an enemy ability deck</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local EnemyApi = require("api.EnemyApi")
local R = require("api.Resource")

EnemyApi.registerEnemyAbilityDeck("Archer", {
  abilities = {
    [7] = {
      image = "...",
      spawn = {
        {
          element = {
            type = R.ElementType.Trap,
            name = "Spike Trap",
            damage = 3,
          },
        }
      },
    },</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Defining the elements for bosses works the same, though they use a different API.</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. Definition within a boss</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local EnemyApi = require("api.EnemyApi")
local R = require("api.Resource")

EnemyApi.registerBossEnemy("Human Commander", {
  icon = "...",
  spawn = {
    {
      element = {
        type = R.ElementType.Enemy,
        name = "City Guard",
      },
    },
    {
      element = {
        type = R.ElementType.Enemy,
        name = "City Archer",
      },
    },
  }
})</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In all instances above, the <code>spawn</code> property is a list of elements, so its possible to put multiple elements in there (as can be seen in the boss example).
Be sure to use the correct number of nesting levels of <code>{ }</code> even when using only 1 element.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_adding_actions"><a class="anchor" href="#_adding_actions"></a>Adding actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the <code>element</code> property, Spawnable Elements also have an optional <code>action</code> property, where you can define <a href="action.html" class="xref page">Actions</a>.</p>
</div>
<div class="paragraph">
<p>This can be useful, when using the <a href="action.html#_spawn" class="xref page">Spawn Action</a> in a scenario definition.
E.g. there are scenarios with secret rooms that get revealed when a button is pressed.
The button creates a door object to the new secret room, by using the Spawn Action.
The <code>action</code> within the Spawnable Element then defines, that the newly spawned door object will really have the "Open" button attached to it.
Otherwise it would just be a token.</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. Definition of an overlay that also acts as a door</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local spawnableElement = {
  element = {
    type = Scenario.OverlayType.Door,
    name = "Stone Door Horizontal",
  },
  action = {
    -- open Room 2 and 6 of the scenario, when the button is pressed
    rooms = {6, 2}
  },
},</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>While this is currently only used in scenario definitions, it&#8217;s also possible to use that feature for the objects in the Context Menu (a class that can spawn doors, how cool would that be?).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_defining_the_placement_of_the_new_object"><a class="anchor" href="#_defining_the_placement_of_the_new_object"></a>Defining the placement of the new object</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The final property of a Spawnable Element is the <code>placement</code> property.
This is used to determine where and at what rotation the new object will be spawned at.
Is has two properties <code>position</code> and <code>rotation</code>, which each take a 3 dimensional vector of the absolute position/rotation within TTS.</p>
</div>
<div class="exampleblock">
<div class="title">Example 10. Defining the placement of an object</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-lua hljs" data-lang="lua">local spawnableElement = {
  element = {
    type = Scenario.OverlayType.Door,
    name = "Stone Door Horizontal",
  },
  action = {
    rooms = {6, 2}
  },
  placement = {
    position = { -3.03, 1.77, 21.00},
    rotation = { 0, 210, 0 },
  },
},</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>When using the element for the <a href="#mod:engine:feature/contextMenu.adoc" class="xref unresolved">Context Menu</a> this property is not required and actually ignored, because spawning from the Context Menu has it&#8217;s own logic to determine the position for the object.</p>
</div>
<div class="paragraph">
<p>To easily get that information, after you placed an object somewhere on the table, use the <a href="../../../dev/commandLine.html#_get_position" class="xref page">Command Line</a>, to print it to the screen (and the Atom console, where you can easily copy it from).</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="200" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
