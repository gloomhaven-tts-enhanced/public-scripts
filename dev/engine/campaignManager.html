<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Campaign Manager :: Gloomhaven Enhanced</title>
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/gh-site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">Gloomhaven Enhanced</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Steam</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://steamcommunity.com/sharedfiles/filedetails/?id=3307604810">Frosthaven Enhanced</a>
            <a class="navbar-item" href="https://steamcommunity.com/sharedfiles/filedetails/?id=2891465199">Gloomhaven Enhanced</a>
          </div>
        </div>
        <a class="navbar-item" href="https://discord.com/channels/847227635892224020/847987593747496990/848737045089615894">Discord</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dev" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">Development</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="#build.adoc">Working on GHE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../documentation.html">Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../commandLine.html">Command Line</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Engine</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="campaignManager.html">Campaign Manager</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Frosthaven</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../frosthaven/campaignManager.html">Campaign Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../frosthaven/sourceOfTruth.html">Sources of Truth</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Gloomhaven</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gloomhaven/campaignManager.html">Campaign Manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../gloomhaven/sourceOfTruth.html">Sources of Truth</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Development</span>
    <span class="version"></span>
  </div>
  <ul class="components">
    <li class="component">
      <div class="title"><a href="../../creator/index.html">Content Creator</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../custom/latest/index.html">Custom Content</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../custom/latest/index.html">2</a>
        </li>
        <li class="version">
          <a href="../../custom/1.3/index.html">1.3</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <div class="title"><a href="../index.html">Development</a></div>
    </li>
    <li class="component">
      <div class="title"><a href="../../mod/latest/index.html">Frosthaven Enhanced</a></div>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mod/latest/index.html">2.1</a>
        </li>
        <li class="version">
          <a href="../../mod/1.3/index.html">1.3</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Development</a></li>
    <li>Engine</li>
    <li><a href="campaignManager.html">Campaign Manager</a></li>
  </ul>
</nav>
<div class="edit-this-page"><a href="https://github.com/gloomhaven-tts-enhanced/public-scripts/edit/main/docs/content/development/modules/engine/pages/campaignManager.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Campaign Manager</h1>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a>Testing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There&#8217;s a test suite that runs automatic tests for the campaign manager.
Given an input file with campaign data, it loads the campaign and then saves it afterward.
It then compares the created save file with an expected output.
If both match, the test is OK, otherwise it will show which parts of didn&#8217;t match.</p>
</div>
<div class="paragraph">
<p>The test suite can be found in the <code>test\campaign-manager</code> directory of the repository.</p>
</div>
<div class="sect2">
<h3 id="_executing_the_tests"><a class="anchor" href="#_executing_the_tests"></a>Executing the tests</h3>
<div class="ulist">
<ul>
<li>
<p>Load the latest enginehaven mod.</p>
</li>
<li>
<p>Additively load the game box to test into the mod.</p>
</li>
<li>
<p>Save the game and load it again.</p>
</li>
<li>
<p>Execute the command <code>pnpm test:&lt;game&gt;</code> (e.g. <code>pnpm test:frosthaven</code>) from the test directory.</p>
</li>
<li>
<p>This will run all the test cases for this game as defined by the respective <code>test.ts</code> file.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_adding_new_tests"><a class="anchor" href="#_adding_new_tests"></a>Adding new tests</h3>
<div class="ulist">
<ul>
<li>
<p>Create a new directory in the <code>res/test</code> directory for the specific game with the name of the test (e.g. <code>res/test/frosthaven/basic</code>).</p>
</li>
<li>
<p>Create a file <code>input.json</code> and a file <code>expected.json</code> inside this new directory.</p>
</li>
<li>
<p>Add the campaign data that should be loaded into <code>input.json</code> and the expected output after saving into <code>expected.json</code>.</p>
</li>
<li>
<p>Add a new test into the <code>src/test/&lt;game&gt;.test.ts</code> file like this:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ts hljs" data-lang="ts">test("basic campaign", async () =&gt; {
  await testHandler.runTest("basic");
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the test must match the name of the directory created in the first step.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="200" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
  </body>
</html>
